import streamlit as st
import os

def center_image_safe(path: str, caption: str = None, width: int = 480):
    """‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢:
       - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏µ: ‡πÇ‡∏ä‡∏ß‡πå‡∏£‡∏π‡∏õ
       - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏≤‡∏¢: ‡πÇ‡∏ä‡∏ß‡πå‡∏Å‡∏•‡πà‡∏≠‡∏á placeholder ‡πÅ‡∏ï‡πà '‡πÑ‡∏°‡πà throw error'
       ‡πÅ‡∏•‡∏∞‡∏à‡∏∞ '‡∏¢‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠' ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô
    """
    st.markdown("<div style='text-align:center; margin:16px 0;'>", unsafe_allow_html=True)

    if path and os.path.exists(path):
        st.image(path, width=width)
    else:
        # ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏≤‡πÄ‡∏õ‡πá‡∏ô placeholder (‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏£‡∏π‡∏õ) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏¢‡πå‡πÄ‡∏≠‡∏≤‡∏ó‡πå‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô
        h = int(width * 0.62)
        st.markdown(
            f"""
            <div style="
                display:inline-flex; width:{width}px; height:{h}px;
                align-items:center; justify-content:center;
                background:#1f2937; border:1px dashed #4b5563; border-radius:10px;
                color:#9ca3af; font-size:0.9rem; text-align:center; padding:10px;">
                üì∑ ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û<br><small>{path}</small>
            </div>
            """,
            unsafe_allow_html=True
        )

    if caption:
        st.markdown(
            f"<div style='font-size:0.9rem; color:#9ca3af; margin-top:6px;'>{caption}</div>",
            unsafe_allow_html=True
        )
    st.markdown("</div>", unsafe_allow_html=True)

# ---------- ‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà ----------
def art_lot_management():
    st.header("‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏°‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏á‡πÑ‡∏°‡πà‡∏•‡πâ‡∏≤‡∏á‡∏û‡∏≠‡∏£‡πå‡∏ï: ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Lot")
    center_image_safe("assets/articles/lot_mgmt.jpg", caption="Lot Size ‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ‡∏Ñ‡∏∑‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏≠‡∏î")

    st.markdown(r"""
‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏î‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏Ñ‡∏∑‡∏≠ **‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πâ (Position Sizing)** ‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö *‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á* ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å  
‡∏™‡∏π‡∏ï‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠:
""")
    st.latex(r'''
    \text{Lot}=\frac{\text{Risk Amount}}{\text{Distance(points)}\times (\$/\text{point}/\text{lot})}
    ''')

    st.markdown("""
### ‡πÅ‡∏ô‡∏ß‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î **Risk ‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ** ‡πÄ‡∏õ‡πá‡∏ô % ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà ‡πÄ‡∏ä‡πà‡∏ô 0.5‚Äì2% ‡∏Ç‡∏≠‡∏á‡∏û‡∏≠‡∏£‡πå‡∏ï  
- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì **‡∏£‡∏∞‡∏¢‡∏∞ SL** ‡∏ï‡∏≤‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á  
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö **MaxLot** ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö Leverage/Contract ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á  
- ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏°‡πâ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏≠‡∏≤‡∏Ñ‡∏∑‡∏ô ‡∏´‡∏≤‡∏Å‡∏à‡∏∞‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡πÅ‡∏ú‡∏ô Grid/Martingale ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô  

‡πÄ‡∏°‡∏∑‡πà‡∏≠ *Risk* ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà ‡πÅ‡∏•‡∏∞ *‡∏£‡∏∞‡∏¢‡∏∞ SL* ‡∏°‡∏µ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πâ‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏î‡∏∏‡∏• ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≤‡∏ü‡πÑ‡∏õ‡∏ú‡∏¥‡∏î‡∏ó‡∏≤‡∏á‡∏Å‡πá‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≥‡∏Å‡∏±‡∏î  
‡πÅ‡∏•‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ñ‡∏π‡∏Å‡∏ó‡∏≤‡∏á ‡∏Å‡∏≥‡πÑ‡∏£‡∏à‡∏∞‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
""")
    
def art_risk_reward_ratio():
    st.header("Risk‚ÄìReward ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?")
    center_image_safe(
        "assets/riskmm_cover.jpeg",
        caption="‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≠‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô (Risk‚ÄìReward Ratio)",
        width=480
    )

    st.markdown("""
**Risk‚ÄìReward (RR)** ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á *‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏°‡πÄ‡∏™‡∏µ‡∏¢ (Risk)* ‡∏ï‡πà‡∏≠ *‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á (Reward)*  
‡πÄ‡∏ä‡πà‡∏ô RR = 1:2 ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á ‚Äú‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á 1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏ß‡∏±‡∏á‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô 2‚Äù ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á RR ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ó‡∏£‡∏î‡∏°‡∏µ **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á‡∏ö‡∏ß‡∏Å (Positive Expectancy)** ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á
""")

    st.markdown("### ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏ú‡∏•")
    st.write(
        "- ‚úÖ **‡∏Å‡∏≥‡∏´‡∏ô‡∏î Stop Loss (SL)** ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ ‚Äò‡∏¢‡∏≠‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£‚Äô\n"
        "- üéØ **‡∏ï‡∏±‡πâ‡∏á Take Profit (TP)** ‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö SL ‡πÄ‡∏ä‡πà‡∏ô RR ‚â• 1:1.5 ‡∏´‡∏£‡∏∑‡∏≠ 1:2\n"
        "- üìè **‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏ô‡∏≤‡∏î Lot ‡∏ï‡∏≤‡∏° Risk% ‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ** (‡πÄ‡∏ä‡πà‡∏ô 1%) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏û‡∏≠‡∏£‡πå‡∏ï"
    )

    st.markdown("### ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏±‡πâ‡∏ô ‡πÜ")
    st.write(
        "‡∏Å‡∏≥‡πÑ‡∏£‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏à‡∏≤‡∏Å Winrate ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÅ‡∏ï‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ú‡∏™‡∏°‡∏ú‡∏™‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á **Risk‚ÄìReward Ratio ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° + ‡∏ß‡∏¥‡∏ô‡∏±‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏ö‡∏ö**"
    )
# ---------- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏∑‡πà‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ----------

# ---------- ‡∏£‡∏ß‡∏°‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° ----------
ARTICLES = [
    {
        "title": "‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏°‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏á‡πÑ‡∏°‡πà‡∏•‡πâ‡∏≤‡∏á‡∏û‡∏≠‡∏£‡πå‡∏ï: ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Lot",
        "desc": "‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à Position Sizing ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏≠‡∏î‡πÉ‡∏ô‡∏ï‡∏•‡∏≤‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û",
        "render": art_lot_management,
    },
        {
        "title": "Risk‚ÄìReward ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?",
        "desc": "‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≠‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á‡∏ö‡∏ß‡∏Å",
        "render": art_risk_reward_ratio,
    },
]